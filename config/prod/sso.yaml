# Production Environment SSO Configuration
# Overrides shared SSO config for Production

sso:
  enabled: true
  name: "Keycloak Production"
  
  # Production-specific OAuth2 endpoints
  auth_url: "https://keycloak.example.com/realms/grafana/protocol/openid-connect/auth"
  token_url: "https://keycloak.example.com/realms/grafana/protocol/openid-connect/token"
  api_url: "https://keycloak.example.com/realms/grafana/protocol/openid-connect/userinfo"
  
  # Production client
  client_id: "grafana-prod"
  
  # Production settings - stricter security
  allow_sign_up: false  # Only allow existing users
  auto_login: false
  scopes: "openid profile email groups"
  use_pkce: true
  use_refresh_token: true
  
  # Role mapping - stricter in production
  role_attribute_path: "contains(groups[*], 'grafana-admin') && 'Admin' || contains(groups[*], 'grafana-editor') && 'Editor' || 'Viewer'"
  role_attribute_strict: true  # Enforce role mapping
  
  # Organization mapping for Production
  org_mapping: |
    Main Organization:1
    Platform Team:*
    Application Team:*
    Business Intelligence:*
    Public:*
  
  # Sign out redirect
  signout_redirect_url: "https://keycloak.example.com/realms/grafana/protocol/openid-connect/logout"
