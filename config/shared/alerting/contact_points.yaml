# =============================================================================
# SHARED CONTACT POINTS CONFIGURATION
# =============================================================================
# Uses Grafana's native export format for easy import/export
# Supports both 'org' (name) and 'orgId' (numeric) for organization reference
# These contact points are deployed to ALL environments
# Environment-specific contact points in config/{env}/alerting/contact_points.yaml will override these
#
# FORMAT: This follows Grafana's native YAML export format
# To export from Grafana: Alerting > Contact Points > Export > YAML
#
# SUPPORTED RECEIVER TYPES:
# - email, webhook, slack, pagerduty, opsgenie, discord, telegram
# - teams, googlechat, victorops, pushover, sns, sensugo, threema
# - webex, line, kafka, oncall, alertmanager, dingding, wecom
# =============================================================================

apiVersion: 1

contactPoints:
  # ===========================================================================
  # PLATFORM TEAM ORGANIZATION
  # ===========================================================================
  - org: Platform Team
    name: platform-email
    receivers:
      - type: email
        settings:
          addresses: platform-team@example.com
          singleEmail: true
          subject: "[{{ .Status | toUpper }}] {{ .CommonLabels.alertname }}"
          message: |
            {{ range .Alerts }}
            Alert: {{ .Labels.alertname }}
            Status: {{ .Status }}
            Severity: {{ .Labels.severity }}
            Summary: {{ .Annotations.summary }}
            Description: {{ .Annotations.description }}
            {{ end }}
        disableResolveMessage: false

  - org: Platform Team
    name: platform-webhook
    receivers:
      - type: webhook
        settings:
          url: https://api.platform.example.com/alerts
          httpMethod: POST
        disableResolveMessage: false

  # ===========================================================================
  # APPLICATION TEAM ORGANIZATION
  # ===========================================================================
  - org: Application Team
    name: app-email
    receivers:
      - type: email
        settings:
          addresses: app-team@example.com
          singleEmail: true
          subject: "[{{ .Status | toUpper }}] {{ .CommonLabels.alertname }}"
        disableResolveMessage: false

  - org: Application Team
    name: app-webhook
    receivers:
      - type: webhook
        settings:
          url: https://api.app.example.com/alerts
          httpMethod: POST
        disableResolveMessage: false

  # ===========================================================================
  # BUSINESS INTELLIGENCE ORGANIZATION
  # ===========================================================================
  - org: Business Intelligence
    name: bi-email
    receivers:
      - type: email
        settings:
          addresses: bi-team@example.com;analysts@example.com
          singleEmail: false
        disableResolveMessage: false

# =============================================================================
# EXAMPLES (Commented out - uncomment and configure to use)
# =============================================================================

# SLACK EXAMPLE:
# - org: Platform Team
#   name: platform-slack
#   receivers:
#     - type: slack
#       settings:
#         recipient: "#alerts"
#         token: "{{ vault:alerting/slack:token }}"
#         title: "{{ .CommonLabels.alertname }}"
#         text: "{{ .CommonAnnotations.summary }}"
#         username: "Grafana Alerts"
#         icon_emoji: ":warning:"
#       disableResolveMessage: false

# PAGERDUTY EXAMPLE:
# - org: Platform Team
#   name: platform-pagerduty
#   receivers:
#     - type: pagerduty
#       settings:
#         integrationKey: "{{ vault:alerting/pagerduty:integration_key }}"
#         severity: critical
#         class: infrastructure
#         component: kubernetes
#         group: platform
#       disableResolveMessage: false

# OPSGENIE EXAMPLE:
# - org: Platform Team
#   name: platform-opsgenie
#   receivers:
#     - type: opsgenie
#       settings:
#         apiKey: "{{ vault:alerting/opsgenie:api_key }}"
#         apiUrl: https://api.opsgenie.com
#         message: "{{ .CommonLabels.alertname }}"
#         autoClose: true
#         overridePriority: true
#         sendTagsAs: tags
#       disableResolveMessage: false

# TELEGRAM EXAMPLE:
# - org: Platform Team
#   name: platform-telegram
#   receivers:
#     - type: telegram
#       settings:
#         bottoken: "{{ vault:alerting/telegram:bot_token }}"
#         chatid: "-1001234567890"
#         parse_mode: HTML
#         message: "<b>{{ .CommonLabels.alertname }}</b>\n{{ .CommonAnnotations.summary }}"
#       disableResolveMessage: false

# MICROSOFT TEAMS EXAMPLE:
# - org: Platform Team
#   name: platform-teams
#   receivers:
#     - type: teams
#       settings:
#         url: "{{ vault:alerting/teams:webhook_url }}"
#         title: "{{ .CommonLabels.alertname }}"
#         message: "{{ .CommonAnnotations.summary }}"
#       disableResolveMessage: false

# MULTIPLE RECEIVERS IN ONE CONTACT POINT:
# - org: Main Organization
#   name: multi-channel-alerts
#   receivers:
#     - type: email
#       settings:
#         addresses: alerts@example.com
#       disableResolveMessage: false
#     - type: webhook
#       settings:
#         url: https://api.example.com/alerts
#         httpMethod: POST
#       disableResolveMessage: false
